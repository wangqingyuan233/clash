# V1.4 
# 抓取程序：https://github.com/zu1k/proxypool
# 节点订阅：https://hello.stgod.com
# 规则订阅：https://github.com/Loyalsoldier/clash-rules
# 参考文章：https://senjianlu.com/2021/11/clash-note-03

# port of HTTP
# port: 7890

# port of SOCKS5
# socks-port: 7891

# (HTTP and SOCKS5 in one port)
mixed-port: 7890

# redir port for Linux and macOS
# redir-port: 7892

allow-lan: true
mode: rule
log-level: info
external-controller: 0.0.0.0:9090

#### TUN模式  ####
dns:
  enable: true
  enhanced-mode: fake-ip
  nameserver:
    - 114.114.114.114 # 真实请求DNS，可多设置几个
tun:
  enable: true
  stack: system # 或 gvisor
  dns-hijack: # DNS劫持设置为系统DNS
    - 1.0.0.1:53 # 请勿更改

#### 节点列表 ####
proxies: 

#### 选择节点 #####
proxy-groups: 
  - name: 🚀 节点选择 
    type: select 
    proxies:
      - 🖐 手动选择
      - ♻️ 自动选择
      - 🥢 东方国家
      - 🍴 西方国家
      - DIRECT
      - REJECT
  - name: 🖐 手动选择 
    type: select 
    use: 
      - all 
  - name: ♻️ 自动选择 
    type: url-test 
    use: 
      - all 
    url: 'http://www.gstatic.com/generate_204' 
    interval: 60 
  - name: 🥢 东方国家
    type: url-test
    use:
      - east
    url: 'http://www.gstatic.com/generate_204'
    interval: 60
  - name: 🍴 西方国家
    type: url-test
    use:
      - west
    url: 'http://www.gstatic.com/generate_204'
    interval: 60
  - name: 🐟 漏网之鱼
    type: select
    proxies:
      - 🚀 节点选择
      - DIRECT

##### 节点订阅 #####
proxy-providers: 
  all: 
    type: http 
    url: "https://hello.stgod.com/clash/proxies?c=JP,KR,SG,DE,FR,NO,RO,SE,ZZ" 
    path: hello.stgod.com/provider.yaml 
    interval: 1200
    health-check: 
      enable: true 
      interval: 60 
      url: http://www.gstatic.com/generate_204 
  east:
    type: http
    url: "https://hello.stgod.com/clash/proxies?c=JP,KR,SG"
    path: ./proxy/east.yaml
    interval: 1200
    health-check:
      enable: true
      interval: 60
      url: http://www.gstatic.com/generate_204
  west:
    type: http
    url: "https://hello.stgod.com/clash/proxies?c=DE,FR,NO,RO,SE,ZZ"
    path: ./proxy/west.yaml
    interval: 1200
    health-check:
      enable: true
      interval: 60
      url: http://www.gstatic.com/generate_204

##### 规则订阅 #####
rule-providers:
  reject:  #广告拦截
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt"
    path: ./ruleset/reject.yaml
    interval: 43200
  icloud:  #iCloud 域名列表
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/icloud.txt"
    path: ./ruleset/icloud.yaml
    interval: 86400
  apple:  #Apple 在中国大陆可直连的域名列表
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.txt"
    path: ./ruleset/apple.yaml
    interval: 43200
  google:  #[慎用]Google 在中国大陆可直连的域名列表
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/google.txt"
    path: ./ruleset/google.yaml
    interval: 43200
  proxy:  #代理域名列表
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt"
    path: ./ruleset/proxy.yaml
    interval: 43200
  direct:  #直连域名列表
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt"
    path: ./ruleset/direct.yaml
    interval: 43200
  private:  #私有网络专用域名列表
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt"
    path: ./ruleset/private.yaml
    interval: 43200
  gfw:  #GFWList 域名列表
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt"
    path: ./ruleset/gfw.yaml
    interval: 43200
  greatfire:  #GreatFire 域名列表
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/greatfire.txt"
    path: ./ruleset/greatfire.yaml
    interval: 43200 
  tld-not-cn:  #非中国大陆使用的顶级域名列表
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/tld-not-cn.txt"
    path: ./ruleset/tld-not-cn.yaml
    interval: 843200
  telegramcidr:  #Telegram 使用的 IP 地址列表
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt"
    path: ./ruleset/telegramcidr.yaml
    interval: 43200
  cncidr:  #中国大陆 IP 地址列表
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt"
    path: ./ruleset/cncidr.yaml
    interval: 43200
  lancidr:  #局域网 IP 及保留 IP 地址列表
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt"
    path: ./ruleset/lancidr.yaml
    interval: 843200
  applications:  #需要直连的常见软件列表
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.txt"
    path: ./ruleset/applications.yaml
    interval: 43200

##### 规则列表 #####
rules:
  - RULE-SET,applications,DIRECT
  - DOMAIN,clash.razord.top,DIRECT
  - DOMAIN,yacd.haishan.me,DIRECT
  - RULE-SET,private,DIRECT
  - RULE-SET,reject,REJECT
  - RULE-SET,icloud,DIRECT
  - RULE-SET,apple,DIRECT
  - RULE-SET,google,DIRECT
  - RULE-SET,proxy,🚀 节点选择
  - RULE-SET,direct,DIRECT
  - RULE-SET,lancidr,DIRECT
  - RULE-SET,cncidr,DIRECT
  - RULE-SET,telegramcidr,🚀 节点选择
  - GEOIP,,DIRECT
  - GEOIP,CN,DIRECT
  - MATCH,🐟 漏网之鱼
